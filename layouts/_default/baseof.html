<!DOCTYPE html>
{{/* Mainroad baseof.html hacked by gleicher to be:
	- more SASS friendly
	- parameterized CSS works correctly
    - make header options
    - default language is English-US
    - add "fullwidth" mode via query string (hides header/sidebar/footer)
*/}}
<html class="no-js" lang="{{ .Site.LanguageCode | default "en-us" }}"> {{/* gleicher - add default*/}}
<head>
	{{- partial "head.html" . -}}
</head>
<body class="body">
	<div class="container container--outer">
        {{/* gleicher - have a noheader options */}}
		{{- if isset .Page.Params "noheader" -}}
		{{- else -}}
            <div class="header-wrapper">
            {{- block "header" . }}{{ partial "header.html" . }}{{ end }}
            </div>
		{{- end -}}
        <div class="wrapper flex">
			<div class="primary">
                {{- if isset .Page.Params "redirect" -}}
                <div class="dimbox"><h3>
                    A newer version of this page is available at:
                    <a href="{{- .Page.Params.redirect }}">{{- .Page.Params.redirect }}</a>
                </h3>
                <p>You will be redirected there in a few seconds...</p>
                </div>
                {{- end }}
                {{- if .Site.Params.archive -}}
                    <div class="dimbox">
                    <h2 style="color:black"> {{ .Site.Params.archive }} </h2>
                    {{- if .Site.Params.archivenote -}}
                        <h3> {{ .Site.Params.archivenote }} </h3>
                        {{- if .Site.Params.archivenexturl -}}
                        <p> You might want <a href="{{- .Site.Params.archivenexturl -}}">{{- .Site.Params.archivenextname -}}</a></p>
                      {{- end -}}                    
                    {{- end -}}
                    </div>
                {{- end -}}

			{{ block "main" . }}
				{{ with .Content }}
				<div class="content main__content clearfix">
					{{ . }}
				</div>
				{{ end }}
			{{ end }}
			</div>
            <div class="sidebar-wrapper">
			{{ block "sidebar" . }}{{ partial "sidebar.html" . }}{{ end }}
            </div>
		</div>
        <div class="footer-wrapper">
		{{ block "footer" . }}{{ partial "footer.html" . }}{{ end }}
        </div>
	</div>
{{/* gleicher - no / for js (this is different than mainroad) */}}
<script async defer src="{{ "js/menu.js" | relURL }}"></script>
{{ range .Site.Params.customJS -}}
<script src="{{ . | relURL }}"></script>
{{- end }}
{{- partial "mathjax.html" . -}}
<script>
    (function() {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('fullwidth')) {
            document.body.classList.add('fullwidth-mode');
        }
    })();
</script>
</body>
</html>
