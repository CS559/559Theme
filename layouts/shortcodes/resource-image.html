{{- $page := . }}
{{- $name := .Get "src" }}
{{- if $name }}{{- else }}{{errorf "resource-image needs a src argument" }}{{- end}}
{{- $size := .Get "size" | default "300x300" }}
{{- $alt := .Get "alt" | default $name }}
{{- $class := .Get "class" | default "" }}
{{- with .Page.Resources.GetMatch $name }}
    {{ $img := .Fit $size }}
    <figure class="{{ $class }}">
        <a href="{{ .RelPermalink }}">
            <img src="{{ $img.RelPermalink }}" alt="{{ $alt }}" />
        </a>
    </figure>
{{- end}}

